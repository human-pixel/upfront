jQuery(document).ready(function(e){function t(e){var t=document.createElement("div"),n=new RegExp("(khtml|moz|ms|webkit|)"+e,"i");for(s in t.style)if(s.match(n))return!0;return!1}function n(){r(),e(".upfront-output-region-container").each(function(){var t=e(this).find(".upfront-output-region").filter(".upfront-region-center, .upfront-region-side-left, .upfront-region-side-right"),n=e(this).hasClass("upfront-region-container-full"),r=height=0;t.length>1&&(t.each(function(){var t=parseInt(e(this).css("min-height")),n=e(this).outerHeight();t&&(r=t>r?t:r),height=n>height?n:height}),t.css({minHeight:height,height:"",maxHeight:""}))})}function r(){e(".upfront-output-region-container.upfront-region-container-full").each(function(){var t=e(this).find(".upfront-region-center"),n=e(this).find(".upfront-region-side-top, .upfront-region-side-bottom"),r=e("body").offset(),i=e(window).height()-r.top;n.each(function(){i-=e(this).outerHeight()}),t.css({minHeight:i,height:i,maxHeight:i})})}function i(){e("[data-bg-image-ratio]").each(function(){var t=e(this).is(".upfront-output-layout"),n=t?e(window).width():e(this).outerWidth(),r=t?e(window).height():e(this).outerHeight(),i=parseFloat(e(this).attr("data-bg-image-ratio"));Math.round(r/n*100)/100>i?e(this).css("background-size",r/i+"px "+r+"px"):e(this).css("background-size",n+"px "+n*i+"px")}),e("[data-bg-video-ratio]").each(function(){var t=e(this).parent().is(".upfront-output-layout"),n=t?e(window).width():e(this).outerWidth(),r=t?e(window).height():e(this).outerHeight(),i=parseFloat(e(this).attr("data-bg-video-ratio")),s=e(this).attr("data-bg-video-style")||"crop",o=e(this).children("iframe");e(this).css("overflow","hidden"),o.css({position:"absolute"});if(s=="crop")if(Math.round(r/n*100)/100>i){var u=r/i;o.css({width:u,height:r,top:0,left:(n-u)/2})}else{var a=n*i;o.css({width:n,height:a,top:(r-a)/2,left:0})}else if(s=="full")o.css({top:0,left:0,width:n,height:r});else if(s=="inside")if(Math.round(r/n*100)/100<i){var u=r/i;o.css({width:u,height:r,top:0,left:(n-u)/2})}else{var a=n*i;o.css({width:n,height:a,top:(r-a)/2,left:0})}})}t("flex")?(e("html").addClass("flexbox-support"),r(),e(window).on("load",r),e(window).on("resize",r)):(n(),e(window).on("load",n),e(window).on("resize",n)),i(),e(window).on("resize",i);var o=e('<div class="upfront-lightbox-bg"></div>'),u=e('<div class="upfront-ui close_lightbox"></div>'),a=e('<div class="upfront-icon upfront-icon-popup-close"></div>');e(document).on("click","a",function(t){if(e("div#sidebar-ui").length>0&&e("div#sidebar-ui").css("display")=="block")return;var n=e(this).attr("href");if(!n)return;if(n.indexOf("#")>=0){var r=n.split("#");if(r[1].trim()!=""&&r[1].trim().indexOf("ltb-")==0){var i=e("div.upfront-region-"+r[1].trim());o.css("background-color",i.data("overlay")).insertBefore(i);if(i.data("closeicon")=="yes"||i.data("addclosetext")=="yes")i.prepend(u),i.data("addclosetext")=="yes"&&(u.append(e("<h3>"+i.data("closetext")+"</h3>")),i.data("closeicon")=="yes"&&u.children("h3").css("margin-right","40px")),i.data("closeicon")=="yes"&&u.append(a),u.bind("click",function(){s()});i.data("clickout")=="yes"&&o.bind("click",function(){s()}),i.css("width",e("div.upfront-grid-layout").first().width()*i.data("col")/24),i.show().css({"margin-left":-parseInt(i.width()/2),"margin-top":-parseInt(i.height()/2)}),e(document).trigger("upfront-lightbox-open"),t.preventDefault();function s(){u.html("").remove(),o.remove(),i.hide()}}}})});