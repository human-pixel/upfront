(function(e,t){function r(){var e=((Upfront.data||{}).Compat||{}).notice,t=((Upfront.data||{}).Compat||{}).snapshot_url;return'<div class="upfront-version_compatibility-nag"><p>'+e+"</p>"+"<div>"+'<a class="boot" href="#boot">Proceed to edit</a>'+(t?'<a class="update" href="'+t+'">Install Snapshot</a>':"")+"</div>"+"</div>"+""}function i(){var e=((Upfront.data||{}).Compat||{}).theme||"your current theme",t=((Upfront.data||{}).Compat||{}).theme_url;return'<div class="upfront-version_compatibility-nag"><p>A new version of <b>'+e+"</b> is available. We recommend you Update <b>"+e+"</b> before making any edits.</p>"+"<div>"+'<a class="boot" href="#boot">Proceed to edit</a>'+(t?'<a class="update" href="'+t+'">Update '+e+"</a>":"")+"</div>"+"</div>"+""}function s(){var e=((Upfront.data||{}).Compat||{}).snapshot_url||!1;return e?r():i()}function o(){return _nag=e.magnificPopup.open({items:{src:s(),type:"inline"},mainClass:"uf-upgrade-notice"}),e(".upfront-version_compatibility-nag").find('a[href="#boot"]').off("click").on("click",function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),e.magnificPopup.close(),Upfront.Application.start=n,n.apply(Upfront.Application),!1}).end(),!1}var n;(function u(){if(!((window.Upfront||{}).Events||{}).on)return setTimeout(u);Upfront.Events.on("application:loaded:layout_editor",function(){n=Upfront.Application.start,Upfront.Application.start=o})})()})(jQuery);