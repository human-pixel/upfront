define([],function(){var e=function(){var e=[],t=[],n=this;this.add=function(t){Upfront.Events.trigger("upfront:renderingqueue:add"),e.push(function(n){t(),Upfront.Events.trigger("upfront:renderingqueue:progress"),setTimeout(function(){n?e.length>0?n(e.shift()):n():Upfront.Events.trigger("upfront:renderingqueue:finished")},0)})},this.addToEnd=function(e){Upfront.Events.trigger("upfront:renderingqueue:add"),t.push(function(n){e(),Upfront.Events.trigger("upfront:renderingqueue:progress"),setTimeout(function(){n&&(t.length>0?n(t.pop()):(n(),Upfront.Events.trigger("upfront:renderingqueue:done")))},0)})},this.start=function(){setTimeout(function(){Upfront.Events.trigger("upfront:renderingqueue:start"),e.length>1?e.shift()(e.shift()):e.length>0&&e.shift()()},500)},Upfront.Events.on("upfront:renderingqueue:finished",function(){t.length>1?t.pop()(t.pop()):t.length>0&&t.pop()()})},t=new e;return t});