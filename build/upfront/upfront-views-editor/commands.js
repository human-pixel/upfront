!function(){var o=Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["scripts/upfront/upfront-views-editor/fields","scripts/upfront/upfront-views-editor/commands/command","scripts/upfront/upfront-views-editor/commands/command-cancel-post-layout","scripts/upfront/upfront-views-editor/commands/command-delete","scripts/upfront/upfront-views-editor/commands/command-edit-background-area","scripts/upfront/upfront-views-editor/commands/command-general-edit-custom-css","scripts/upfront/upfront-views-editor/commands/command-edit-custom-css","scripts/upfront/upfront-views-editor/commands/command-edit-global-regions","scripts/upfront/upfront-views-editor/commands/command-edit-layout-background","scripts/upfront/upfront-views-editor/commands/command-edit-structure","scripts/upfront/upfront-views-editor/commands/command-exit","scripts/upfront/upfront-views-editor/commands/command-export-history","scripts/upfront/upfront-views-editor/commands/command-export-layout","scripts/upfront/upfront-views-editor/commands/command-go-to-type-preview-page","scripts/upfront/upfront-views-editor/commands/command-load-layout","scripts/upfront/upfront-views-editor/commands/command-logo","scripts/upfront/upfront-views-editor/commands/command-merge","scripts/upfront/upfront-views-editor/commands/command-new-page","scripts/upfront/upfront-views-editor/commands/command-new-post","scripts/upfront/upfront-views-editor/commands/command-open-font-manager","scripts/upfront/upfront-views-editor/commands/command-preview-layout","scripts/upfront/upfront-views-editor/commands/command-publish-layout","scripts/upfront/upfront-views-editor/commands/command-redo","scripts/upfront/upfront-views-editor/commands/command-reset-everything","scripts/upfront/upfront-views-editor/commands/command-save-layout","scripts/upfront/upfront-views-editor/commands/command-save-layout-as","scripts/upfront/upfront-views-editor/commands/command-save-post-layout","scripts/upfront/upfront-views-editor/commands/command-select","scripts/upfront/upfront-views-editor/commands/command-toggle-grid","scripts/upfront/upfront-views-editor/commands/command-toggle-mode","scripts/upfront/upfront-views-editor/commands/command-toggle-mode-small","scripts/upfront/upfront-views-editor/commands/command-trash","scripts/upfront/upfront-views-editor/commands/command-undo","scripts/upfront/upfront-views-editor/commands/responsive/command-create-responsive-layouts","scripts/upfront/upfront-views-editor/commands/responsive/command-start-responsive-mode","scripts/upfront/upfront-views-editor/commands/responsive/command-stop-responsive-mode","scripts/upfront/upfront-views-editor/commands/responsive/command-responsive-redo","scripts/upfront/upfront-views-editor/commands/responsive/command-responsive-undo","scripts/upfront/upfront-views-editor/commands/breakpoint/command-add-custom-breakpoint","scripts/upfront/upfront-views-editor/commands/breakpoint/command-breakpoint-dropdown","scripts/upfront/upfront-views-editor/commands/command-open-media-gallery","scripts/upfront/upfront-views-editor/commands/command-popup-list"],function(e,n,t,m,s,r,i,d,a,p,c,u,l,f,v,w,h,C,g,y,b,k,E,U,L,x,S,M,T,P,R,O,$,N,B,D,G,A,z,j,F,H){var V=n.extend({className:"themes-dropdown",enabled:!0,events:{"click .upfront-field-select-value":"openOptions","mouseup .upfront-field-select":"onMouseUp","change .upfront-field-select-option input":"onChange","click .upfront-field-select-option label":"onOptionClick"},initialize:function(){var n=_.union([{label:o.choose_theme,value:""}],_.map(Upfront.themeExporter.themes,function(o){return{label:o.name,value:o.directory}}));this.fields=[new e.Select({values:n,default_value:"upfront"===Upfront.themeExporter.currentTheme?"":Upfront.themeExporter.currentTheme,change:function(){""!==this.get_value()&&this.get_value()!==Upfront.themeExporter.currentTheme&&Upfront.Events.trigger("builder:load_theme",this.get_value())}})]},render:function(){this.fields[0].render(),this.$el.append(this.fields[0].el)},openOptions:function(o){this.fields[0].openOptions(o)},onMouseUp:function(o){this.fields[0].onMouseUp(o)},onChange:function(o){this.fields[0].onChange(o)},onOptionClick:function(o){this.fields[0].onOptionClick(o)}}),q=n.extend({className:"command-new-layout",render:function(){this.$el.addClass("upfront-icon upfront-icon-layout"),this.$el.html(o.new_layout),this.$el.prop("title",o.new_layout)},on_click:function(){Upfront.Events.trigger("command:layout:create")}}),I=n.extend({className:"command-browse-layout upfront-icon upfront-icon-browse-layouts",render:function(){this.$el.html(o.layouts),this.$el.prop("title",o.layouts)},on_click:function(){Upfront.Events.trigger("command:layout:browse")}}),J=Backbone.View.extend({tagName:"ul",initialize:function(){this.Commands=_([new C({model:this.model}),new g({model:this.model}),new L({model:this.model}),new x({model:this.model}),new $({model:this.model}),new E({model:this.model}),new m({model:this.model}),new M({model:this.model}),new T({model:this.model}),new U({model:this.model})]),Upfront.Settings.Debug.transients&&this.commands.push(new u({model:this.model}))},render:function(){this.$el.find("li").remove(),this.commands.each(this.add_command,this)},add_command:function(o){o&&(o.remove(),o.render(),this.$el.append(o.el),o.bind("upfront:command:remove",this.remove_command,this),o.delegateEvents())},remove_command:function(o){var e=this.commands.reject(function(e){return e.remove(),e.cid==o.cid});this.commands=_(e),this.render()}});return{Command:n,Commands:J,Command_CancelPostLayout:t,Command_Delete:m,Command_EditBackgroundArea:s,Command_GeneralEditCustomCss:r,Command_EditCustomCss:i,Command_EditGlobalRegions:d,Command_EditLayoutBackground:a,Command_EditStructure:p,Command_Exit:c,Command_ExportHistory:u,Command_ExportLayout:l,Command_GoToTypePreviewPage:f,Command_LoadLayout:v,Command_Logo:w,Command_Merge:h,Command_NewPage:C,Command_NewPost:g,Command_OpenFontManager:y,Command_PreviewLayout:b,Command_PublishLayout:k,Command_Redo:E,Command_ResetEverything:U,Command_SaveLayout:L,Command_SaveLayoutAs:x,Command_SavePostLayout:S,Command_Select:M,Command_ToggleGrid:T,Command_ToggleMode:P,Command_ToggleModeSmall:R,Command_Trash:O,Command_Undo:$,Command_CreateResponsiveLayouts:N,Command_StartResponsiveMode:B,Command_StopResponsiveMode:D,Command_ResponsiveRedo:G,Command_ResponsiveUndo:A,Command_AddCustomBreakpoint:z,Command_BreakpointDropdown:j,Command_OpenMediaGallery:F,Command_PopupList:H,Command_ThemesDropdown:V,Command_BrowseLayout:I,Command_NewLayout:q}})}();