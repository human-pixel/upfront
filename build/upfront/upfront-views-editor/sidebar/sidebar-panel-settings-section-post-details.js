!function(t,o){var e=Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["scripts/upfront/upfront-views-editor/sidebar/sidebar-panel-settings-section"],function(t){return t.extend({initialize:function(t){this.options=t,this.settings=_([]);var o=this;Upfront.Views.PostDataEditor||require(["content"],function(){o.getPostId()!==!1&&setTimeout(o.prepare_editor(o))}),this.listenTo(Upfront.Views.PostDataEditor,"loaded",function(t){t&&(Upfront.Views.PostBox=t.prepareBox(),o.append_box())}),this.listenTo(Upfront.Views.PostDataEditor,"post:saved",function(){this.render()}),this.listenTo(Upfront.Events,"click:edit:navigate",function(t){"undefined"!=typeof t&&t&&setTimeout(o.prepare_editor(o))}),"undefined"!=typeof Upfront.Views.PostDataEditor&&Upfront.Views.PostDataEditor.contentEditor!==!1&&(Upfront.Views.PostBox=Upfront.Views.PostDataEditor.contentEditor.prepareBox()),Upfront.Views.PostDataEditor&&Upfront.Views.PostBox&&o.append_box(Upfront.Views.PostBox),this.editor=Upfront.Views.PostDataEditor},get_name:function(){return"post_details"},get_title:function(){return Upfront.Application.is_single("post")?e.post_settings:Upfront.Application.is_single("page")?e.page_settings:void 0},on_render:function(){Upfront.Views.PostDataEditor&&Upfront.Views.PostBox&&this.append_box(Upfront.Views.PostBox)},prepare_editor:function(t){return"undefined"!=typeof Upfront.Views.PostDataEditor&&(Upfront.Views.PostDataEditor||{}).postId===t.getPostId()?(Upfront.Views.PostDataEditor.reboot(),!0):("undefined"!=typeof Upfront.Views.PostDataEditor&&Upfront.Views.PostDataEditor.remove(),void(Upfront.Views.PostDataEditor=new Upfront.Content.PostEditor({editor_id:"this_post_"+t.getPostId(),post_id:t.getPostId(),content_mode:"post_content"})))},getPostId:function(){return postId=_upfront_post_data.post_id?_upfront_post_data.post_id:Upfront.Settings.LayoutEditor.newpostType?0:!1,!this.postId&&"themeExporter"in Upfront&&Upfront.Application.mode.current===Upfront.Application.MODE.THEME?postId="fake_post":!this.postId&&"themeExporter"in Upfront&&Upfront.Application.mode.current===Upfront.Application.MODE.CONTENT_STYLE&&(postId="fake_styled_post"),postId},append_box:function(){var t=this,o=Upfront.Views.PostBox;setTimeout(function(){t.$el.empty(),t.$el.append(o.$el),o.rebindEvents()},50)},on_cancel:function(){this.child_view&&this.child_view.rerender()},on_edit_start:function(){this.child_view&&(this.child_view._do_cache=!1)},on_edit_stop:function(){this.child_view&&(this.child_view._do_cache=!0)},on_title_change:function(t){},on_content_change:function(t,o){},on_author_change:function(t){if(this.child_view){var o=this.model.get_property_value_by_name("data_type");this.authorId=t,"author"==o&&this.child_view.render()}},on_date_change:function(t){if(this.child_view){var o=this.model.get_property_value_by_name("data_type");this.postDate=Upfront.Util.format_date(t,!0,!0).replace(/\//g,"-"),"post_data"==o&&this.child_view.render(["date_posted"])}}})})}(jQuery,Backbone);