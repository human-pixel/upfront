!function(e){define([],function(){var n=function(){var n={},t=function(e,n,r){var i=n.pop();Upfront.Util.post({action:"upfront_save_"+e+"_preset",data:i}).done(function(){n.length>0?t(e,n,r):r.resolve()}).fail(function(){r.reject(),Upfront.Views.Editor.notify("Preset "+i.name+" save failed.")})};this.savePresets=function(){var r=[];return result=e.Deferred(),_.each(n,function(n,i){if(n.length>0){var u=e.Deferred();r.push(u),t(i,n,u)}}),r.length>0?(e.when.apply(e,r).done(function(){result.resolve()}).fail(function(){result.reject()}),result):result.resolve()},this.queuePresetSave=function(e,t){n[t]=n[t]||[],n[t]=_.reject(n[t],function(n){return n.id===e.id}),n[t].push(e)}},t=new n;return t})}(jQuery);