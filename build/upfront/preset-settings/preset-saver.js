(function(e){define([],function(){var e=function(){var e={},t=function(e,n){var r=n.pop();Upfront.Util.post({action:"upfront_save_"+e+"_preset",data:r}).done(function(){n.length>0&&t(e,n)}).fail(function(){Upfront.Views.Editor.notify("Preset "+r.name+" save failed.")})},n=function(){_.each(e,function(e,n){e.length>0&&t(n,e)})};this.queuePresetSave=function(t,n){e[n]=e[n]||[],e[n]=_.reject(e[n],function(e){return e.id===t.id}),e[n].push(t)},Upfront.Events.on("command:layout:save_start",n)},t=new e;return t})})(jQuery);