define(["scripts/upfront/preset-settings/show-state-settings-button","scripts/upfront/preset-settings/state-settings"],function(e,t){var n=Upfront.Settings.l10n.preset_manager,r=Upfront.Views.Editor.Settings.Item.extend({className:"preset_specific",initialize:function(r){this.options=r||{},this.listenTo(this.model,"change",this.onPresetUpdate);var i=this,s=!1,o=!1;if(this.options.model.get("id")!=="default")var u=[new Upfront.Views.Editor.Field.Button({model:this.model,label:n.delete_label,className:"delete_preset",compact:!0,on_click:function(){i.deletePreset()}})];else var u=[];_.each(this.options.stateFields,function(t,n){var r=new e({state:n});u.push(r),this.listenTo(r,"upfront:presets:state_show",this.showState),s||(s=r)},this),_.each(this.options.stateFields,function(e,n){var r=new t({model:this.model,fields:e,state:n});u.push(r),o?r.$el.hide():o=r},this),s.$el.addClass("active"),o.$el.show(),this.fields=_(u)},onPresetUpdate:function(){this.trigger("upfront:presets:update",this.model.toJSON())},deletePreset:function(){this.trigger("upfront:presets:delete",this.model)},showState:function(e){this.$el.find(".state_settings_button").removeClass("active"),this.$el.find(".state_settings_button_"+e).addClass("active"),this.$el.find(".state_settings").hide(),this.$el.find(".state_settings_"+e).show()}});return r});