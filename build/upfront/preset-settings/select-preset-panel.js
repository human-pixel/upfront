define(["scripts/upfront/preset-settings/select-preset-item","scripts/upfront/preset-settings/edit-preset-item","scripts/upfront/preset-settings/preset-css-settings","scripts/upfront/element-settings/panel"],function(e,t,n,r){var i=r.extend({className:"preset-manager-panel",initialize:function(r){this.options=r,this.selectPresetItem=new e({model:this.model,presets:this.options.presets});var i=this.property("preset")?this.clear_preset_name(this.property("preset")):"default";this.editPresetItem=new t({model:this.options.presets.findWhere({id:i}),stateFields:this.options.stateFields}),this.presetCSS=new n({model:this.model,preset:this.options.presets.findWhere({id:i})}),this.listenTo(this.selectPresetItem,"upfront:presets:new",this.createPreset),this.listenTo(this.selectPresetItem,"upfront:presets:edit",this.editPreset),this.listenTo(this.editPresetItem,"upfront:presets:delete",this.deletePreset),this.listenTo(this.editPresetItem,"upfront:presets:reset",this.resetPreset),this.listenTo(this.editPresetItem,"upfront:presets:update",this.onPresetUpdate),this.listenTo(this.presetCSS,"upfront:presets:update",this.onPresetCSSUpdate),this.listenTo(this.model.get("properties"),"change",this.onPresetChange),this.settings=_([this.selectPresetItem,this.editPresetItem,this.presetCSS])},clear_preset_name:function(e){return e=e.replace(" ","-"),e=e.replace(/[^-a-zA-Z0-9]/,""),e},createPreset:function(e){this.trigger("upfront:presets:new",e)},onPresetChange:function(e){this.trigger("upfront:presets:change",e)},onPresetUpdate:function(e){this.trigger("upfront:presets:update",e)},onPresetCSSUpdate:function(e){this.trigger("upfront:presets:update",e)},editPreset:function(e){this.trigger("upfront:presets:edit",e)},deletePreset:function(e){this.trigger("upfront:presets:delete",e)},resetPreset:function(e){this.trigger("upfront:presets:reset",e)},property:function(e,t,n){return typeof t!="undefined"?(typeof n=="undefined"&&(n=!0),this.model.set_property(e,t,n)):this.model.get_property_value_by_name(e)}});return i});