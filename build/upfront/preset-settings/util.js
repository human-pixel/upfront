(function(e){define([],function(){var t=function(e){return e.breakpoint&&e.breakpoint.tablet&&(e.tablet=[],_.each(e.breakpoint.tablet,function(t,n){e.tablet[n]=t})),e.breakpoint&&e.breakpoint.mobile&&(e.mobile=[],_.each(e.breakpoint.mobile,function(t,n){e.mobile[n]=t})),e},n=function(e,n){var r=Upfront.Util.template(n);return typeof e.preset_style!="undefined"&&(e.preset_style=e.preset_style.replace(/#page/g,"#page.upfront-layout-view .upfront-editable_entity.upfront-module"),e.preset_style=Upfront.Util.colors.convert_string_ufc_to_color(e.preset_style,!0)),r({properties:t(e)}).replace(/#page/g,"div#page.upfront-layout-view").replace(new RegExp(e.id+" .upfront-button","g"),e.id+".upfront-button").replace(/\\'/g,"'").replace(/\\'/g,"'").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\\"/g,'"')},r={generateCss:n,generatePresetsToPage:function(e,n){_.each(Upfront.mainData[e+"Presets"],function(i){r.updatePresetStyle(e,t(i),n)})},getPresetProperties:function(t,n){var r=Upfront.mainData[t+"Presets"]||[],i={};return e.each(r,function(e,t){if(!t||!t.id||n!==t.id)return!0;i=_.extend({},t)}),i},updatePresetStyle:function(t,r,i){var s=t+"-preset-"+r.id,o=_.extend({},r);_.each(o,function(e,t){Upfront.Util.colors.is_theme_color(e)&&(o[t]=e)}),e("style#"+s).length===0&&e("body").append('<style class="preset-style" id="'+s+'"></style>'),e("style#"+s).text(Upfront.Util.colors.convert_string_ufc_to_color(n(o,i),!0))}};return r})})(jQuery);