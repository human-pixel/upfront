define([],function(){var e=Upfront.Settings.l10n.preset_manager,t=Upfront.Views.Editor.Field.Chosen_Select.extend({className:"preset select-preset-field",render:function(){Upfront.Views.Editor.Field.Chosen_Select.prototype.render.call(this);var t=this,r="",n=this.$el.find(".upfront-chosen-select").val();if(r="default"==n&&Upfront.Application.get_current()===Upfront.Application.MODE.THEME?"230px":"175px",this.$el.find(".upfront-chosen-select").chosen({search_contains:!0,width:r,disable_search:!Upfront.Application.user_can("MODIFY_PRESET")}),Upfront.Application.user_can("MODIFY_PRESET")){var a=['<a href="#" title="'+e.add_preset_label+'" class="upfront-preset-add">'+e.add_label+"</a>"];this.$el.find(".chosen-search").append(a.join(""))}return this.$el.on("click",".upfront-preset-add",function(r){if(r.preventDefault(),!Upfront.Application.user_can("MODIFY_PRESET"))return!1;var n=t.$el.find(".chosen-search input").val();return""===n.trim()?void alert(e.not_empty_label):n.match(/[^A-Za-z0-9 ]/)?void alert(e.special_character_label):n.match(/^[A-Za-z][A-Za-z0-9 ]*$/)?void t.trigger("upfront:presets:new",n.trim()):void alert(e.invalid_preset_label)}),this},get_value_html:function(e,t){var r="",n=this.get_saved_value()?this.get_saved_value():"default";return e.value===this.clear_preset_name(n)&&(r=' selected="selected"'),['<option value="',e.value,'"',r,">",e.label,"</option>"].join("")},clear_preset_name:function(e){return e=e.replace(" ","-"),e=e.replace(/[^-a-zA-Z0-9]/,"")}});return t});