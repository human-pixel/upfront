define([],function(){var e=Upfront.Settings.l10n.preset_manager,t=Upfront.Views.Editor.Field.Chosen_Select.extend({className:"preset select-preset-field",render:function(){Upfront.Views.Editor.Field.Chosen_Select.prototype.render.call(this);var t=this,a="",r=this.$el.find(".upfront-chosen-select").val();if(a="default"==r?"230px":"175px",this.$el.find(".upfront-chosen-select").chosen({search_contains:!0,width:a,disable_search:!Upfront.Application.user_can("MODIFY_PRESET")}),Upfront.Application.user_can("MODIFY_PRESET")){var n=['<a href="#" title="'+e.add_preset_label+'" class="upfront-preset-add">'+e.add_label+"</a>"];this.$el.find(".chosen-search").append(n.join(""))}return this.$el.on("click",".upfront-preset-add",function(a){if(a.preventDefault(),!Upfront.Application.user_can("MODIFY_PRESET"))return!1;var r=t.$el.find(".chosen-search input").val();return""===r.trim()?void alert(e.not_empty_label):r.match(/[^A-Za-z0-9 ]/)?void alert(e.special_character_label):r.match(/^[A-Za-z][A-Za-z0-9 ]*$/)?void t.trigger("upfront:presets:new",r.trim()):void alert(e.invalid_preset_label)}),this},get_value_html:function(e,t){var a="",r=this.get_saved_value()?this.get_saved_value():"default";return e.value===this.clear_preset_name(r)&&(a=' selected="selected"'),['<option value="',e.value,'"',a,">",e.label,"</option>"].join("")},clear_preset_name:function(e){return e=e.replace(" ","-"),e=e.replace(/[^-a-zA-Z0-9]/,"")}});return t});