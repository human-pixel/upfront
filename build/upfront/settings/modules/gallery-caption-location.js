define(["scripts/upfront/settings/modules/base-module"],function(e){var i=Upfront.Settings.l10n.gallery_element,l=e.extend({className:"settings_module caption_location gallery-caption-location clearfix",group:!1,initialize:function(e){this.options=e||{};var l=this,n=this.options.state;this.options.toggle=!0,this.fields=_([new Upfront.Views.Editor.Field.Toggle({model:this.model,className:"useCaptions checkbox-title upfront-toggle-field",name:"use_captions",label:"",default_value:1,multiple:!1,values:[{label:i.panel.show_caption,value:"yes"}],change:function(e){l.model.set("use_captions",e)},show:function(e,i){var t=i.closest(".upfront-settings-item-content");if("yes"==e){t.find("."+n+"-toggle-wrapper").show();var o=l.model.get("caption-height",e);"fixed"===o&&t.find("."+n+"-caption-height-number").show()}else t.find("."+n+"-toggle-wrapper").hide(),t.find("."+n+"-caption-height-number").hide()}}),new Upfront.Views.Editor.Field.Select({model:this.model,className:n+"-caption-select caption_select",name:"captionType",default_value:"below",label_style:"inline",label:i.panel.caption_location,values:[{value:"over",label:i.panel.over},{value:"below",label:i.panel.under}],change:function(e){l.model.set("captionType",e),"below"==e&&l.model.set("showCaptionOnHover","0")},show:function(e,i){var l=i.closest(".state_modules");"below"===e||"undefined"==typeof e?l.find(".gallery-caption-on-hover").hide():l.find(".gallery-caption-on-hover").show()}}),new Upfront.Views.Editor.Field.Radios_Inline({className:n+"-caption-trigger field-caption_trigger gallery-caption-on-hover upfront-field-wrap upfront-field-wrap-multiple upfront-field-wrap-radios-inline over_image_field",model:this.model,name:"showCaptionOnHover",label:i.panel.caption_show,label_style:"inline",layout:"horizontal-inline",values:[{label:i.panel.always,value:"0"},{label:i.panel.hover,value:"1"}],change:function(e){l.model.set("showCaptionOnHover",e)}}),new Upfront.Views.Editor.Field.Radios_Inline({className:n+"-caption-height field-caption-height upfront-field-wrap upfront-field-wrap-multiple upfront-field-wrap-radios-inline",model:this.model,name:"caption-height",label_style:"inline",label:i.panel.caption_height,layout:"horizontal-inline",values:[{label:i.panel.auto,value:"auto"},{label:i.panel.fixed,value:"fixed"}],change:function(e){l.model.set("caption-height",e)},show:function(e,i){var t=i.closest(".state_modules"),o=l.model.get("use_captions");"yes"===o&&("fixed"===e?t.find("."+n+"-caption-height-number").show():t.find("."+n+"-caption-height-number").hide())}}),new Upfront.Views.Editor.Field.Number_Unit({model:this.model,className:n+"-caption-height-number caption-height-number",name:"thumbCaptionsHeight",label_style:"inline",min:1,label:i.panel.caption_height,default_value:20,values:[{label:"px",value:"1"}],change:function(e){l.model.set("thumbCaptionsHeight",e)}})]),this.listenToOnce(this,"rendered",function(){setTimeout(function(){if("yes"===l.model.get("use_captions")){l.$el.find("."+n+"-toggle-wrapper").show();var e=l.model.get("caption-height",value);"fixed"===e&&l.$el.find("."+n+"-caption-height-number").show()}else l.$el.find("."+n+"-toggle-wrapper").hide(),l.$el.find("."+n+"-caption-height-number").hide()},500)})}});return l});