define(["scripts/upfront/settings/modules/base-module"],function(e){var t=Upfront.Settings.l10n.preset_manager,n=e.extend({className:"settings_module typography_settings_item",group:!0,get_title:function(){return this.options.title},initialize:function(e){this.options=e||{};var n=this,r=this.options.state,i="no-toggle",s=0,o="";typeof n.options.elements!="undefined"&&s++,typeof this.options.default_element!="undefined"&&(o=this.options.default_element+"-"),this.options.toggle===!0&&(s++,i="element-toggled"),this.fields=_([new Upfront.Views.Editor.Field.Typeface_Chosen_Select({name:o+this.options.fields.typeface,model:this.model,values:Upfront.Views.Editor.Fonts.theme_fonts_collection.get_fonts_for_select(),label:t.typeface,select_width:"225px",label_style:"inline",className:r+"-font-face static typeFace "+i,change:function(e){n.model.set(o+n.options.fields.typeface,e),n.fields._wrapped[1+s]=new Upfront.Views.Editor.Field.Typeface_Style_Chosen_Select({model:this.model,name:o+n.options.fields.fontstyle,values:Upfront.Views.Editor.Fonts.theme_fonts_collection.get_variants_for_select(n.model.get(o+n.options.fields.typeface)),label:t.weight_style,font_family:n.model.get(n.options.fields.typeface),select_width:"225px",label_style:"inline",className:r+"-font-style static weightStyle "+i,change:function(e){var t=Upfront.Views.Font_Model.parse_variant(e);n.model.set(o+n.options.fields.fontstyle,e),n.model.set(o+n.options.fields.weight,t.weight),n.model.set(o+n.options.fields.style,t.style)},show:function(e){e!==null&&n.fields._wrapped[1+s].set_option_font(e)}}),n.$el.empty(),n.render()}}),new Upfront.Views.Editor.Field.Typeface_Style_Chosen_Select({model:this.model,name:o+this.options.fields.fontstyle,values:Upfront.Views.Editor.Fonts.theme_fonts_collection.get_variants_for_select(n.model.get(o+n.options.fields.typeface)),label:t.weight_style,font_family:n.model.get(this.options.fields.typeface),select_width:"225px",label_style:"inline",className:r+"-font-style static weightStyle "+i,change:function(e){var t=Upfront.Views.Font_Model.parse_variant(e);n.model.set(o+n.options.fields.fontstyle,e),n.model.set(o+n.options.fields.weight,t.weight),n.model.set(o+n.options.fields.style,t.style)},show:function(e){e!==null&&n.fields._wrapped[1+s].set_option_font(e)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:r+"-font-size fontSize "+i,name:o+this.options.fields.size,label:t.size,label_style:"inline",suffix:t.px,default_value:12,change:function(e){n.model.set(o+n.options.fields.size,e)}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:r+"-font-lineheight lineHeight "+i,name:o+this.options.fields.line_height,label:t.line_height,label_style:"inline",default_value:1,min:0,step:.1,change:function(e){n.model.set(o+n.options.fields.line_height,e)}}),new Upfront.Views.Editor.Field.Color({model:this.model,className:r+"-font-color upfront-field-wrap upfront-field-wrap-color sp-cf fontColor "+i,name:o+this.options.fields.color,blank_alpha:0,default_value:"#000",label_style:"inline",label:t.color,spectrum:{preferredFormat:"rgb",change:function(e){if(!e)return!1;var t=e.get_is_theme_color()!==!1?e.theme_color:e.toRgbString();n.model.set(o+n.options.fields.color,t)},move:function(e){if(!e)return!1;var t=e.get_is_theme_color()!==!1?e.theme_color:e.toRgbString();n.model.set(o+n.options.fields.color,t)}}})]),typeof n.options.elements!="undefined"&&this.fields.unshift(new Upfront.Views.Editor.Field.Select({label:t.type_element,label_style:"inline",name:r+"-element-type",className:r+"-select-element selectElement "+i,values:n.options.elements,change:function(){var e=this.get_value();n.model.set(r+"-element-type",e),o=e+"-",n.fields._wrapped[s-1].set_value(e),n.fields._wrapped[s].set_value(n.model.get(o+n.options.fields.typeface)),n.fields._wrapped[s].set_option_font(n.model.get(o+n.options.fields.typeface)),n.fields._wrapped[s+1].set_value(n.model.get(o+n.options.fields.fontstyle)),n.fields._wrapped[s+1].set_option_font(n.model.get(o+n.options.fields.fontstyle)),n.fields._wrapped[s+2].set_value(n.model.get(o+n.options.fields.size)),n.fields._wrapped[s+3].set_value(n.model.get(o+n.options.fields.line_height)),n.fields._wrapped[s+4].set_value(n.model.get(o+n.options.fields.color)),n.fields._wrapped[s+4].update_input_border_color(n.model.get(o+n.options.fields.color))}})),this.options.toggle===!0&&(this.group=!1,this.fields.unshift(new Upfront.Views.Editor.Field.Checkboxes({model:this.model,className:"useTypography checkbox-title "+i,name:n.options.fields.use,label:"",default_value:1,multiple:!1,values:[{label:t.typography,value:"yes"}],change:function(e){n.model.set(n.options.fields.use,e)},show:function(e,t){var n=t.closest(".state_modules");e=="yes"?(n.find("."+r+"-select-element").show(),n.find("."+r+"-font-face").show(),n.find("."+r+"-font-style").show(),n.find("."+r+"-font-size").show(),n.find("."+r+"-font-lineheight").show(),n.find("."+r+"-font-color").show()):(n.find("."+r+"-select-element").hide(),n.find("."+r+"-font-face").hide(),n.find("."+r+"-font-style").hide(),n.find("."+r+"-font-size").hide(),n.find("."+r+"-font-lineheight").hide(),n.find("."+r+"-font-color").hide())}})))}});return n});