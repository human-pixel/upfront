define(["scripts/upfront/settings/modules/base-module"],function(e){var t=Upfront.Settings.l10n.preset_manager,n=e.extend({className:"settings_module border_settings_item clearfix",group:!1,initialize:function(e){this.options=e||{};var n=this,r=this.options.state,i=0,s="",o="";typeof this.options.elements!="undefined"&&i++,typeof this.options.default_element!="undefined"&&(o=this.options.default_element+"-",s="border-with-fields"),this.fields=_([new Upfront.Views.Editor.Field.Checkboxes({model:this.model,className:"useBorder checkbox-title",name:n.options.fields.use,label:"",default_value:1,multiple:!1,values:[{label:t.border,value:"yes"}],change:function(e){n.model.set(n.options.fields.use,e)},show:function(e,t){var n=t.closest(".state_modules");e=="yes"?(n.find("."+r+"-border-width").show(),n.find("."+r+"-border-type").show(),n.find("."+r+"-border-color").show(),n.find("."+r+"-border-select-element").css("opacity","1")):(n.find("."+r+"-border-width").hide(),n.find("."+r+"-border-type").hide(),n.find("."+r+"-border-color").hide(),n.find("."+r+"-border-select-element").css("opacity","0.5"))}}),new Upfront.Views.Editor.Field.Number({model:this.model,className:r+"-border-width borderWidth "+s,name:o+n.options.fields.width,label:"",default_value:1,suffix:t.px,values:[{label:"",value:"1"}],change:function(e){n.model.set(o+n.options.fields.width,e)}}),new Upfront.Views.Editor.Field.Select({model:this.model,className:r+"-border-type borderType "+s,name:o+n.options.fields.type,default_value:"solid",label:"",values:[{label:t.solid,value:"solid"},{label:t.dashed,value:"dashed"},{label:t.dotted,value:"dotted"}],change:function(e){n.model.set(o+n.options.fields.type,e)}}),new Upfront.Views.Editor.Field.Color({model:this.model,className:r+"-border-color upfront-field-wrap upfront-field-wrap-color sp-cf borderColor "+s,name:o+n.options.fields.color,blank_alpha:0,label:"",default_value:"#000",spectrum:{preferredFormat:"rgb",change:function(e){if(!e)return!1;var t=e.get_is_theme_color()!==!1?e.theme_color:e.toRgbString();n.model.set(o+n.options.fields.color,t)},move:function(e){if(!e)return!1;var t=e.get_is_theme_color()!==!1?e.theme_color:e.toRgbString();n.model.set(o+n.options.fields.color,t)}}})]),typeof n.options.elements!="undefined"&&this.fields.unshift(new Upfront.Views.Editor.Field.Select({className:r+"-border-select-element border_selectElement",values:n.options.elements,change:function(){var e=this.get_value();o=e+"-",n.fields._wrapped[i+1].set_value(n.model.get(o+n.options.fields.width)),n.fields._wrapped[i+2].set_value(n.model.get(o+n.options.fields.type)),n.fields._wrapped[i+3].set_value(n.model.get(o+n.options.fields.color)),n.fields._wrapped[i+3].update_input_border_color(n.model.get(o+n.options.fields.color))}}))}});return n});