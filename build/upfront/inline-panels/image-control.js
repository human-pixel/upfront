(function(e){define(["scripts/upfront/inline-panels/control","text!scripts/upfront/inline-panels/templates/panel-control-template.html"],function(t,n){var r=Upfront.mainData.l10n.image_element,i=t.extend({multiControl:!0,hideOnClick:!1,hideOkButton:!0,width:26,height:18,events:{click:"onClickControl","click button":"onClickOk"},initialize:function(e){var t=this;this.options=e||{},this.listenTo(Upfront.Events,"image-control:open",function(e){if(t===e)return;t.close()})},render:function(){t.prototype.render.call(this,arguments);var e=this,n;return this.$el.hasClass("image-edit-control-panel-item")||this.$el.addClass("image-edit-control-panel-item"),this.view&&(this.view.render(),this.view.delegateEvents()),this.panel||(this.$el.append('<div class="uimage-control-panel image-control-button"></div>'),this.$el.find(".image-control-button").append(this.view.$el)),this},remove:function(){e(document).off("click.dialog-control."+this.cid)},onDocumentClick:function(t){var n=e(t.target),r=t.data;n.closest("#page").length&&n[0]!==r.el&&!n.closest(r.el).length&&r.isopen&&r.close()},onClickControl:function(e){this.$el.siblings(".upfront-control-dialog-open").removeClass("upfront-control-dialog-open"),e.preventDefault(),this.clicked(e),this.isopen?this.close():this.open()},open:function(){return this.isopen=!0,this.$el.addClass("upfront-control-dialog-open"),this.trigger("panel:open"),Upfront.Events.trigger("dialog-control:open",this),this},close:function(){return this.isopen=!1,this.$el.removeClass("upfront-control-dialog-open"),this.trigger("panel:close"),this}});return i})})(jQuery);