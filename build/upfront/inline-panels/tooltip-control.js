(function(e){define(["scripts/upfront/inline-panels/l10n","scripts/upfront/inline-panels/item","scripts/upfront/inline-panels/control"],function(t,n,r){var i=r.extend({multiControl:!0,events:{click:"onClickControl","click .upfront-inline-panel-item":"selectItem"},onClickControl:function(e){var t=this.$el.closest(".upfront-grid-layout"),n=this.$el.closest(".upfront-wrapper");if(this.isDisabled)return;e.preventDefault(),this.clicked(e),this.$el.hasClass("open")?(this.$el.removeClass("open"),t.removeClass("upfront-grid-layout-current"),n.removeClass("upfront-wrapper-current")):(this.$el.addClass("open"),t.addClass("upfront-grid-layout-current"),n.addClass("upfront-wrapper-current"))},render:function(){n.prototype.render.call(this,arguments);var t=this.$(".uimage-caption-control"),r=this,i;this.$el.hasClass("uimage-caption-control-item")||this.$el.addClass("uimage-caption-control-item"),t.length||(t=e('<div class="uimage-caption-control"></div>'),this.$el.append(t)),_.each(this.sub_items,function(e,n){n===r.selected?e.setIsSelected(!0):e.setIsSelected(!1),e.render(),t.append(e.$el)}),i=this.sub_items[this.selected],i&&(typeof i.icon!="undefined"?this.$el.children("i").addClass("upfront-icon-region-"+i.icon):typeof i.label!="undefined"&&this.$el.find(".tooltip-content").append(": "+i.label))},get_selected_item:function(){return this.selected},selectItem:function(t){var n=!1,r=e(t.target).is("i")?e(t.target):e(t.target).find("i");_.each(this.sub_items,function(i,s){r.hasClass("upfront-icon-region-"+i.icon)&&(n=s),!n&&e(t.target).closest(".upfront-inline-panel-item").attr("id")===i.id&&(n=s)}),n&&(this.selected=n,this.render(),this.trigger("select",n))},setDisabled:function(e){this.isDisabled=e,e?this.tooltip=t.ctrl.caption_position_disabled:this.tooltip=t.ctrl.caption_position}});return i})})(jQuery);