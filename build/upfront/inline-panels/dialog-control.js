(function(e){define(["scripts/upfront/inline-panels/l10n","scripts/upfront/inline-panels/control","text!scripts/upfront/inline-panels/templates/panel-control-template.html"],function(t,n,r){var i=n.extend({multiControl:!0,events:{click:"onClickControl","click button":"onClickOk"},render:function(){n.prototype.render.call(this,arguments);var i=this;this.$el.hasClass("uimage-control-panel-item")||this.$el.addClass("uimage-control-panel-item"),this.view&&(this.view.render(),this.view.delegateEvents());if(!this.panel){var s=e(_.template(r,{l10n:t.template}));this.isopen&&s.show(),this.$el.append(s),s.find(".uimage-control-panel-content").html("").append(this.view.$el),this.panel=s,e(document).click(function(t){var n=e(t.target);n.closest("#page").length&&n[0]!==i.el&&!n.closest(i.el).length&&i.isopen&&i.close()})}return this},onClickControl:function(t){if(!e(t.target).hasClass("upfront-icon"))return;t.preventDefault(),this.isopen?this.close():this.open()},onClickOk:function(e){e.preventDefault(),this.trigger("panel:ok",this.view)},bindEvents:function(){this.panel.find("button").on("click",function(){})},open:function(){return this.panel.show(),this.isopen=!0,this.$el.addClass("upfront-control-dialog-open"),this.trigger("panel:open"),this},close:function(){return this.panel.hide(),this.isopen=!1,this.$el.removeClass("upfront-control-dialog-open"),this.trigger("panel:close"),this}});return i})})(jQuery);