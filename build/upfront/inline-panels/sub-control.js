!function(t){define(["scripts/upfront/inline-panels/item","scripts/upfront/inline-panels/control"],function(e,i){var n=Upfront.mainData.l10n.image_element,s=i.extend({multiControl:!0,events:{click:"onClickControl","click .upfront-inline-panel-item":"selectItem"},initialize:function(){var e=this;t(document).click(function(i){var n=t(i.target);n.closest("#page").length&&n[0]!==e.el&&!n.closest(e.el).length&&e.isOpen&&e.close()}),this.listenTo(Upfront.Events,"upfront:hide:subControl",this.close)},onClickControl:function(t){this.isDisabled||(t.preventDefault(),this.clicked(t),this.$el.siblings(".upfront-sub-control-dialog-open").removeClass("upfront-sub-control-dialog-open"),this.isOpen?this.close():this.open())},open:function(){this.isOpen=!0,this.$el.addClass("upfront-sub-control-dialog-open"),this.$el.siblings().find("i").css("opacity",.4),Upfront.Events.trigger("upfront:hide:paddingPanel")},close:function(){this.isOpen=!1,this.$el.removeClass("upfront-sub-control-dialog-open"),this.$el.siblings().find("i").css("opacity",.7)},render:function(){e.prototype.render.call(this,arguments);var i=this.$(".image-sub-control"),n=this,s=0;i.length||(i=t('<div class="image-sub-control inline-panel-sub-control-dialog"></div>'),this.$el.append(i)),_.each(this.sub_items,function(t,e){e===n.selected?t.setIsSelected(!0):t.setIsSelected(!1),t.render(),i.append(t.$el),s++}),this.$el.find(".image-sub-control").css("width",38*s)},get_selected_item:function(){return this.selected},setDisabled:function(t){this.isDisabled=t,t?this.tooltip=n.ctrl.caption_position_disabled:this.tooltip=n.ctrl.caption_display}});return s})}(jQuery);