!function(t){define(["scripts/upfront/inline-panels/item","scripts/upfront/inline-panels/control"],function(e,n){var d=Upfront.mainData.l10n.global.views,i=n.extend({multiControl:!0,events:{click:"onClickControl"},initialize:function(){var e=this;t(document).click(function(n){var d=t(n.target);d.closest("#page").length&&d[0]!==e.el&&!d.closest(e.el).length&&e.isOpen&&e.close()}),t(document).mouseup(function(n){var d=t(n.target),i=Upfront.data.currentEntity;d.closest("#page").length&&d[0]!==e.el&&!d.closest(e.el).length&&"undefined"!=typeof i&&"undefined"!=typeof i.padding_hint_locked&&i.padding_hint_locked&&(i.padding_hint_locked=!1,i.top_padding_hint_timer=setTimeout(function(){"function"==typeof i.hide_top_padding_hint&&i.hide_top_padding_hint()},1e3),i.bottom_padding_hint_timer=setTimeout(function(){"function"==typeof i.hide_bottom_padding_hint&&i.hide_bottom_padding_hint()},1e3))}),this.default_padding={top:!1,bottom:!1,left:!1,right:!1},this.listenTo(Upfront.Events,"upfront:paddings:updated",this.refresh)},onClickControl:function(e){var n=t(e.target);if(!this.isDisabled)return n.closest(".upfront-icon-region-padding").length?void(n.hasClass(".upfront-field-checkbox")||(e.preventDefault(),this.clicked(e),this.$el.siblings(".upfront-control-dialog-open").removeClass("upfront-control-dialog-open"),this.listenTo(Upfront.Events,"upfront:hide:paddingPanel",this.close),this.isOpen?this.close():this.open())):void e.stopPropagation()},open:function(){this.isOpen=!0,this.refresh(),this.$el.addClass("upfront-control-dialog-open"),this.update_position(),Upfront.Events.trigger("upfront:hide:subControl")},close:function(){this.isOpen=!1,this.$el.removeClass("upfront-control-dialog-open"),this.$el.closest(".upfront-inline-panel-item-open").removeClass("upfront-inline-panel-item-open")},on_render:function(){var e=this,n=e.$(".upfront-padding-control"),i=t('<div class="upfront-padding-container upfront-padding-cotainer-top"></div>'),p=t('<div class="upfront-padding-container upfront-padding-cotainer-lock"></div>'),o=t('<div class="upfront-padding-container upfront-padding-cotainer-left"></div>'),a=t('<div class="upfront-padding-container upfront-padding-cotainer-right"></div>'),r=t('<div class="upfront-padding-container upfront-padding-cotainer-bottom"></div>'),s=Upfront.Settings.LayoutEditor.Grid.column_padding;e.$el.hasClass("upfront-padding-control-item")||e.$el.addClass("upfront-padding-control-item"),0===n.length&&(n=t('<div class="upfront-padding-control inline-panel-control-dialog"></div>'),e.$el.append(n)),e.default_padding.top===!1&&(e.default_padding.top=s),e.default_padding.bottom===!1&&(e.default_padding.bottom=s),e.default_padding.left===!1&&(e.default_padding.left=s),e.default_padding.right===!1&&(e.default_padding.right=s),e.paddingTop=new Upfront.Views.Editor.Field.Number({model:this.model,use_breakpoint_property:!0,property:"top_padding_num",label:"",default_value:this.model.get_breakpoint_property_value("top_padding_num")||e.default_padding.top,min:0,max:200,step:5,change:function(){var t=this.get_value();this.model.set_breakpoint_property("use_padding","yes",!0),this.model.set_breakpoint_property("lock_padding","",!0),this.model.set_breakpoint_property("top_padding_use","yes",!0),this.model.set_breakpoint_property("top_padding_slider",t,!0),this.model.set_breakpoint_property("top_padding_num",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:top:updated",this.model,Upfront.data.currentEntity)}}),e.paddingLeft=new Upfront.Views.Editor.Field.Number({model:this.model,use_breakpoint_property:!0,property:"left_padding_num",label:"",default_value:this.model.get_breakpoint_property_value("left_padding_num")||e.default_padding.left,min:0,max:200,step:5,change:function(){var t=this.get_value();this.model.set_breakpoint_property("use_padding","yes",!0),this.model.set_breakpoint_property("lock_padding","",!0),this.model.set_breakpoint_property("left_padding_use","yes",!0),this.model.set_breakpoint_property("left_padding_slider",t,!0),this.model.set_breakpoint_property("left_padding_num",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:left:updated",this.model,Upfront.data.currentEntity)}}),e.paddingRight=new Upfront.Views.Editor.Field.Number({model:this.model,use_breakpoint_property:!0,property:"right_padding_num",label:"",default_value:this.model.get_breakpoint_property_value("right_padding_num")||e.default_padding.right,min:0,max:200,step:5,change:function(){var t=this.get_value();this.model.set_breakpoint_property("use_padding","yes",!0),this.model.set_breakpoint_property("lock_padding","",!0),this.model.set_breakpoint_property("right_padding_use","yes",!0),this.model.set_breakpoint_property("right_padding_slider",t,!0),this.model.set_breakpoint_property("right_padding_num",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:right:updated",this.model,Upfront.data.currentEntity)}}),e.paddingBottom=new Upfront.Views.Editor.Field.Number({model:this.model,use_breakpoint_property:!0,property:"bottom_padding_num",label:"",default_value:this.model.get_breakpoint_property_value("bottom_padding_num")||e.default_padding.bottom,min:0,max:200,step:5,change:function(){var t=this.get_value();this.model.set_breakpoint_property("use_padding","yes",!0),this.model.set_breakpoint_property("lock_padding","",!0),this.model.set_breakpoint_property("bottom_padding_use","yes",!0),this.model.set_breakpoint_property("bottom_padding_slider",t,!0),this.model.set_breakpoint_property("bottom_padding_num",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:bottom:updated",this.model,Upfront.data.currentEntity)}}),e.lockPadding=new Upfront.Views.Editor.Field.Checkboxes({model:this.model,className:"padding-lock",use_breakpoint_property:!0,property:"lock_padding",label:"",default_value:0,multiple:!1,values:[{label:"",value:"yes"}],show:function(t){if("yes"==t){var n=e.model.get_breakpoint_property_value("top_padding_num");e.paddingLeft.$el.find("input").prop("disabled",!0).css("opacity",.4),e.paddingRight.$el.find("input").prop("disabled",!0).css("opacity",.4),e.paddingBottom.$el.find("input").prop("disabled",!0).css("opacity",.4),this.model.set_breakpoint_property("left_padding_num",n),this.model.set_breakpoint_property("top_padding_num",n),this.model.set_breakpoint_property("right_padding_num",n),this.model.set_breakpoint_property("bottom_padding_num",n),e.paddingLeft.get_field().val(n),e.paddingRight.get_field().val(n),e.paddingTop.get_field().val(n),e.paddingBottom.get_field().val(n)}else e.paddingLeft.$el.find("input").prop("disabled",!1).css("opacity",1),e.paddingRight.$el.find("input").prop("disabled",!1).css("opacity",1),e.paddingBottom.$el.find("input").prop("disabled",!1).css("opacity",1)},change:function(t){this.model.set_breakpoint_property("lock_padding",t)}}),n.html(""),$paddingControlTitle='<span class="upfront-padding-arrow"></span><span class="upfront-padding-title">'+d.padding_title+"</span>",n.append($paddingControlTitle),$paddingControlTitle='<span class="upfront-padding-keyboard">&nbsp;</span><span class="upfront-checkbox-info" title="'+d.padding_keyboard+'"></span>',n.append($paddingControlTitle),e.paddingTop.render(),i.append(e.paddingTop.$el),n.append(i),e.lockPadding.render(),p.append(e.lockPadding.$el),e.lockPadding.delegateEvents(),n.append(p),e.paddingLeft.render(),o.append(e.paddingLeft.$el),n.append(o),e.paddingRight.render(),a.append(e.paddingRight.$el),n.append(a),e.paddingBottom.render(),r.append(e.paddingBottom.$el),n.append(r),i.on("mousedown",function(){Upfront.data.currentEntity.padding_hint_locked=!0}).on("mouseup",function(){var t=Upfront.data.currentEntity;t.padding_hint_locked=!1,t.top_padding_hint_timer=setTimeout(function(){"function"==typeof t.hide_top_padding_hint&&t.hide_top_padding_hint()},1e3)}),r.on("mousedown",function(){Upfront.data.currentEntity.padding_hint_locked=!0}).on("mouseup",function(){var t=Upfront.data.currentEntity;t.padding_hint_locked=!1,t.bottom_padding_hint_timer=setTimeout(function(){"function"==typeof t.hide_bottom_padding_hint&&t.hide_bottom_padding_hint()},1e3)})},refresh:function(t){if(!t||t===this.model){var e,n,d,i,p=Upfront.Settings.LayoutEditor.Grid.column_padding,o=this.model.get_breakpoint_property_value("top_padding_use",!0),a=this.model.get_breakpoint_property_value("bottom_padding_use",!0),r=this.model.get_breakpoint_property_value("left_padding_use",!0),s=this.model.get_breakpoint_property_value("right_padding_use",!0),l=this.model.get_breakpoint_property_value("lock_padding",!0),_=this.lockPadding.$el.find("input");this.default_padding.top===!1&&(this.default_padding.top=p),this.default_padding.bottom===!1&&(this.default_padding.bottom=p),this.default_padding.left===!1&&(this.default_padding.left=p),this.default_padding.right===!1&&(this.default_padding.right=p),e=o?this.model.get_breakpoint_property_value("top_padding_num",!0):this.default_padding.top,n=a?this.model.get_breakpoint_property_value("bottom_padding_num",!0):this.default_padding.bottom,d=r?this.model.get_breakpoint_property_value("left_padding_num",!0):this.default_padding.left,i=s?this.model.get_breakpoint_property_value("right_padding_num",!0):this.default_padding.right,l?_.attr("checked","checked"):_.removeAttr("checked"),_.trigger("change"),"undefined"!=typeof this.paddingTop&&this.paddingTop.get_field().val(e),"undefined"!=typeof this.paddingBottom&&this.paddingBottom.get_field().val(n),"undefined"!=typeof this.paddingLeft&&this.paddingLeft.get_field().val(d),"undefined"!=typeof this.paddingRight&&this.paddingRight.get_field().val(i)}},on_up_arrow_click:function(){if("undefined"!=typeof this.paddingTop){var t=parseInt(this.model.get_breakpoint_property_value("top_padding_num",!0),10)-5;t=0>t?0:t,this.model.set_breakpoint_property("top_padding_use","yes"),this.model.set_breakpoint_property("top_padding_num",t),this.model.set_breakpoint_property("top_padding_slider",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:top:updated",this.model,Upfront.data.currentEntity),this.refresh()}},on_down_arrow_click:function(){if("undefined"!=typeof this.paddingTop){var t=parseInt(this.model.get_breakpoint_property_value("top_padding_num",!0),10)+5;this.model.set_breakpoint_property("top_padding_use","yes"),this.model.set_breakpoint_property("top_padding_num",t),this.model.set_breakpoint_property("top_padding_slider",t),Upfront.Events.trigger("upfront:paddings:updated",this.model,Upfront.data.currentEntity),Upfront.Events.trigger("upfront:paddings:top:updated",this.model,Upfront.data.currentEntity),this.refresh()}},update_position:function(){var t=this.$el.prevAll().length,e=38*t;this.$el.find(".upfront-padding-control").css("left",-e),this.$el.find(".upfront-padding-arrow").css("left",e)}});return i})}(jQuery);