(function(e){Upfront={post:function(t,n){return e.post(ajaxurl,t,function(){},n?n:"json")}},e(document).on("click","#upfront_reset_cache",function(t){t.preventDefault(),$this=e(this),$this.addClass("loading"),Upfront.post({action:"upfront_reset_cache"}).done(function(e){$this.removeClass("loading")}).fail(function(e){$this.removeClass("loading")})}),e(document).on("change",".upfront-layouts-list",function(t){$button=e("#upfront_reset_layout"),e(this).val()==="0"?$button.attr("disabled",!0):$button.attr("disabled",!1)}),e(document).on("click","#upfront_reset_layout",function(t){t.preventDefault();var n=e(this),r=e(".upfront-layouts-list"),i=r.val(),s=e(".upfront-layouts-list option[value='"+i+"']").html(),o=window.confirm(Upfront_Data.l10n.sure_to_reset_layout.replace("{layout}",s));if(o!==!0)return;n.addClass("loading"),Upfront.post({action:"upfront_reset_layout",layout:i}).done(function(e){n.removeClass("loading"),r.find("option").length===2&&(r.find("option[value="+i+"]").remove(),r.val(0),n.attr("disabled",!0))}).fail(function(e){n.removeClass("loading")})}),e(document).on("click","#upfront_reset_theme",function(t){t.preventDefault();var n=e(this),r=window.confirm(Upfront_Data.l10n.sure_to_reset_theme);if(r!==!0)return;n.addClass("loading"),Upfront.post({action:"upfront_reset_all_from_db"}).done(function(e){n.removeClass("loading")}).fail(function(e){n.removeClass("loading")})})})(jQuery),function(e,t){function n(t){var n=[];return e('[data-capability_id="'+t+'"] [data-role_id]').each(function(){var t=e(this);n.push({role:t.attr("data-role_id"),able:!!t.find(":checked").length})}),n}function r(t){var n=' [data-role_id="'+t+'"]',r=e('[data-capability_id="responsive_mode"]'+n).add('[data-capability_id="singlepost_layout_mode"]'+n).add('[data-capability_id="modify_element_presets"]'+n).add('[data-capability_id="delete_element_presets"]'+n).add('[data-capability_id="switch_element_presets"]'+n);return r}function i(){var t=n("boot_upfront");e.each(t,function(t,n){if(!(n||{}).role)return!0;if((n||{}).able)return!0;var r=e('[data-role_id="'+n.role+'"]'),i=r.find(":checkbox");i.each(function(){var t=e(this);if((t.attr("name")||"").match(/\[boot_upfront\]/))return!0;t.attr("checked",!1).closest(".upfront_toggle").addClass("hide")})})}function s(){var t=n("modify_element_presets");e.each(t,function(t,n){if(!(n||{}).role)return!0;if((n||{}).able)return!0;var r=e('[data-capability_id="delete_element_presets"] [data-role_id="'+n.role+'"]'),i=r.find(":checkbox");i.each(function(){var t=e(this);t.attr("checked",!1).closest(".upfront_toggle").addClass("hide")})})}function o(){var t=n("layout_mode");e.each(t,function(t,n){if(!(n||{}).role)return!0;if((n||{}).able)return!0;var i=r(n.role),s=i.find(":checkbox");s.each(function(){e(this).attr("checked",!1).closest(".upfront_toggle").addClass("hide")})})}function u(){i(),s(),o()}function a(t){var n=e(this),r=n.is(":checked"),i=n.closest("[data-role_id]").attr("data-role_id"),s=e('[data-capability_id] [data-role_id="'+i+'"] .upfront_toggle');s.each(function(){var t=e(this);if(t.find('[name*="boot_upfront"]').length)return!0;r?t.removeClass("hide"):t.addClass("hide")}),u()}function f(t){var n=e(this),r=n.closest("[data-role_id]").attr("data-role_id"),i=e('[data-capability_id="delete_element_presets"] [data-role_id="'+r+'"]');i.find(":checkbox").attr("checked",!1),n.is(":checked")?i.find(".upfront_toggle").removeClass("hide"):i.find(".upfront_toggle").addClass("hide")}function l(){var t=e(this),n=t.closest("[data-role_id]").attr("data-role_id"),i=r(n);i.find(":checkbox").attr("checked",!1),t.is(":checked")?i.find(".upfront_toggle").removeClass("hide"):i.find(".upfront_toggle").addClass("hide"),u()}function c(){e(document).on("change",'[data-capability_id="boot_upfront"] :checkbox',a),e(document).on("change",'[data-capability_id="modify_element_presets"] :checkbox',f),e(document).on("change",'[data-capability_id="layout_mode"] :checkbox',l)}function h(){if(!e("body").is(".wp-admin"))return!1;if(!e("#upfront_user_restrictions_listing").length)return!1;u(),c()}e(h)}(jQuery);