(function(e){var t=["text!scripts/redactor/ueditor-templates.html"];define("redactor_plugins",t,function(t){var n=Backbone.View.extend({initialize:function(e){var t=this;t.redactor=e.redactor,t.button=e.button,t.panel=e.panel,this.on("open",function(e){console.log("Panel open"),t.$el.trigger("open",e)}),this.on("closed",function(e){console.log("Panel closed"),t.$el.trigger("closed",e)}),this.render()},openToolbar:function(e){var t=this;t.redactor.$air.show(),t.redactor.airBindHide(),e&&setTimeout(function(){t.panel.is(":visible")||t.button.click()},300)},closeToolbar:function(){this.redactor.$air.fadeOut(100)},closePanel:function(){this.panel.is(":visible")&&this.button.click()},disableEditorStop:function(){this.redactor.ueditor.disableStop=!0},enableEditorStop:function(){var e=this;setTimeout(function(){e.redactor.ueditor.disableStop=!1},300)},appendOkButton:function(t){var n=this;if(!n.$el.siblings(".ueditor-ok").length){t=t||"Ok";var r=e('<a class="ueditor-ok">'+t+"</a>").on("click",function(e){n.$el.trigger("ok")});r.insertAfter(n.$el)}}});if(!r)var r={};r.upfrontImages={beforeInit:function(){var t=this;t.events.on("ueditor:stop",function(){ImagesHelper.Image.unbind_events()}),t.events.on("ueditor:insert:media",function(){ImagesHelper.Gallery.to_html(t),ImagesHelper.Slider.to_html(t)}),ImagesHelper.Image.redactor=t,ImagesHelper.Image.create_dialog(),ImagesHelper.Image.bind_events(),Upfront.Media.Transformations.add(ImagesHelper.Image.cleanup),Upfront.Media.Transformations.add(ImagesHelper.Gallery.from_html),Upfront.Media.Transformations.add(ImagesHelper.Slider.from_html),Upfront.Events.on("upfront:editor:image_align",function(t,n){var r=!1;"left"===n?r="margin-right":"right"===n&&(r="margin-left");if(!r)return!1;e(t).css(r,"15px")})}},r.upfrontSink={beforeInit:function(){var e=this;Upfront.data.ueditor||(Upfront.data.ueditor={sink:!1}),this.opts.buttonsCustom.upfrontSink={title:"More tools"}},init:function(){var t=this,n=this.$toolbar.find(".redactor_btn_upfrontSink").parent().addClass("upfront-sink-button"),r=this.$toolbar.find(".upfront-sink-button ~ li"),i=e('<div class="ueditor-sink"></div>');n.on("click",function(){Upfront.data.ueditor.sink?t.closeSink():t.openSink()}),r.detach().appendTo(i),this.$toolbar.append(i),Upfront.data.ueditor.sink&&this.$toolbar.addClass("ueditor-sink-open"),r.each(function(){var n=e(this).find("a").attr("class").match(/redactor_btn_[^\s]*/g),r=!1,i=!1;n.length&&(r=n[0].replace("redactor_btn_","")),i=t.$toolbar.find(".redactor_dropdown_box_"+r),i.length&&i.css({"margin-top":"40px"})}),this.$air.on("show",function(){Upfront.data.ueditor.sink&&t.$air.css({top:t.$air.offset().top-40})})},openSink:function(){Upfront.data.ueditor.sink=!0,this.$toolbar.addClass("ueditor-sink-open"),this.$air.css({top:this.$air.offset().top-40})},closeSink:function(){Upfront.data.ueditor.sink=!1,this.$toolbar.removeClass("ueditor-sink-open"),this.$air.css({top:this.$air.offset().top+40})}},r.upfrontPlaceholder={init:function(){var t=this.placeholderText;this.$element.attr("placeholder")&&(t=this.$element.attr("placeholder")),t===""&&(t=!1);if(t!==!1){this.placeholderRemoveFromEditor(),this.$placeholder=this.$editor.clone(!1),this.$placeholder.attr("contenteditable",!1).removeClass("ueditable redactor_editor").addClass("ueditor-placeholder").html(this.opts.linebreaks?t:this.cleanParagraphy(t)),this.$editor.after(this.$placeholder),this.$editor.css("position")=="static"&&this.$editor.css("position","relative"),this.$editor.css("z-index",1);var n=this.$editor.position();this.$placeholder.css({position:"absolute","z-index":"0",top:n.top,left:n.left,right:this.$box.outerWidth()-(n.left+this.$editor.outerWidth())}),this.opts.placeholder=t,this.$editor.on("focus keyup",e.proxy(this.placeholderUpdate,this)),this.placeholderUpdate()}},placeholderUpdate:function(){this.sync();var e=this.get();e==""?this.$placeholder.show():this.$placeholder.hide()}},r.upfrontIcons={$sel:!1,beforeInit:function(){this.opts.buttonsCustom.upfrontIcons={title:"Icons",panel:this.panel}},init:function(){UeditorEvents.on("ueditor:key:down",function(t,n){if(e(t.getParent()).hasClass("uf_font_icon")||e(t.getCurrent()).hasClass("uf_font_icon"))n.keyCode<48||n.keyCode>90||n.preventDefault()})},panel:n.extend(_.extend({},Upfront.Views.Mixins.Upfront_Scroll_Mixin,{tpl:_.template(e(t).find("#font-icons").html()),events:{"click .ueditor-font-icon":"insert_icon",open:"open",closed:"close"},render:function(e){this.$el.html(this.tpl()),this.stop_scroll_propagation(this.$el)},open:function(e,t){this.redactor=t,this.redactor.selectionRestore(),this.set_current_icon(),this.$el.parent().css({left:193})},close:function(){this.redactor&&this.redactor.selectionRemoveMarkers()},insert_icon:function(t){this.redactor.selectionRestore(!0,!1);var n=e(e(t.target).hasClass("ueditor-font-icon")?e(t.target).html():e(t.target).closest(".ueditor-font-icon").html()),r=this.$(".font-icons-size").val(),i=this.$(".font-icons-top").val();n.css({"font-size":r+"px",top:i+"px"}),this.redactor.execCommand("inserthtml",n[0].outerHTML,!0),this.redactor.sync(),this.closePanel()},set_current_icon:function(){this.redactor.selectionRestore(!0,!1),window.re=this.redactor;var t=e(this.redactor.getParent()).eq(0),n=this;t.hasClass("uf_font_icon")||t.parent().hasClass("uf_font_icon")&&(t=t.parent()),t.hasClass("uf_font_icon")&&(this.$(".font-icons-size").val(parseFloat(t.css("font-size"))),this.$(".font-icons-top").val(parseFloat(t.css("top"))),this.$(".upfront-font-icons-controlls input").on("change",function(r){r.stopPropagation(),r.preventDefault(),n.redactor.selectionSave(),n.redactor.bufferSet();var i=e(this).val()+"px";e(this).hasClass("font-icons-size")&&t.css("font-size",i),e(this).hasClass("font-icons-top")&&t.css("top",i),n.redactor.sync(),n.redactor.selectionRestore()})),n.redactor.sync()}}))},r.stateButtons={init:function(){var e=this;this.addStateButtons(),this.startStateObserver()},addStateButtons:function(){if(this.stateButtons)return;var t=this;this.stateButtons={},e.each(this.opts.stateButtons,function(n,r){if(e.inArray(n,t.opts.airButtons)!==-1){var i=new t.StateButton(n,r);t.buttonAdd(n,r.title,function(){t.stateCallback(n,i)}),t.$air.on("show",function(){i.guessState(t)})}})},stateCallback:function(e,t){t.guessState(this),t.callback(e,this.buttonGet(e),t)},startStateObserver:function(){var t=e.proxy(this.stateObserver,this);this.$element.on("mouseup.redactor keyup.redactor",t)},stateObserver:function(){var t=this;e.each(this.stateButtons,function(e,n){n.guessState(t)}),t.waitForMouseUp=!1},StateButton:function(t,n){var r=this,i={},s=!1;return firstState=!1,r.id=t,r.currentState=n.defaultState,r.states=n.states,r.iconClasses="",r.defaultState=n.defaultState,e.each(r.states,function(e,t){s?i[s]=e:firstState=e,r.iconClasses+=" "+t.iconClass,s=e}),i[s]=firstState,r.nextStates=i,r.nextState=function(e){this.setState(r.nextStates[this.currentState],e)},r.setState=function(e,t){this.currentState=e,t.removeClass(this.iconClasses).addClass(this.states[this.currentState].iconClass)},r.triggerState=function(t,n,r,i){var s=e.proxy(this.states[this.currentState].callback,t);s(n,r,i)},r.guessState=function(t){var n=!1;e.each(this.states,function(e,r){n=r.isActive(t)?e:n}),n||(n=this.defaultState),this.setState(n,t.buttonGet(this.id))},r.getElement=function(e){return e.$toolbar.find(".redactor_btn_"+this.id)},{id:t,title:n.title,callback:function(e,t,n){n.nextState(t),n.triggerState(this,e,t,n)},nextState:e.proxy(r.nextState,r),setState:e.proxy(r.setState,r),triggerState:e.proxy(r.triggerState,r),guessState:e.proxy(r.guessState,r)}}},r.stateAlignment={beforeInit:function(){var t=this;this.opts.stateButtons.stateAlign={title:"Text alignment",defaultState:"left",states:{left:{iconClass:"ueditor-left",isActive:function(t){var n=e(t.getSelection().baseNode);return n.length&&n[0].nodeType==3&&(n=n.parent()),n.length&&n.css("text-align")=="left"},callback:function(e,n,r){t.alignmentLeft()}},center:{iconClass:"ueditor-center",isActive:function(t){var n=e(t.getSelection().baseNode);return n.length&&n[0].nodeType==3&&(n=n.parent()),n.length&&n.css("text-align")=="center"},callback:function(e,n,r){t.alignmentCenter()}},right:{iconClass:"ueditor-right",isActive:function(t){var n=e(t.getSelection().baseNode);return n.length&&n[0].nodeType==3&&(n=n.parent()),n.length&&n.css("text-align")=="right"},callback:function(e,n,r){t.alignmentRight()}},justify:{iconClass:"ueditor-justify",isActive:function(t){var n=e(t.getSelection().baseNode);return n.length&&n[0].nodeType==3&&(n=n.parent()),n.length&&n.css("text-align")=="justify"},callback:function(e,n,r){t.alignmentJustify()}}}}}},r.stateAlignmentCTA={beforeInit:function(){var e=this;this.opts.stateButtons.stateAlignCTA={title:"Text alignment",defaultState:"left",states:{left:{iconClass:"ueditor-left",isActive:function(t){return e.$element.length&&e.$element.css("text-align")=="left"},callback:function(t,n,r){e.$element.css("text-align","left")}},center:{iconClass:"ueditor-center",isActive:function(t){return e.$element.length&&e.$element.css("text-align")=="center"},callback:function(t,n,r){e.$element.css("text-align","center")}},right:{iconClass:"ueditor-right",isActive:function(t){return e.$element.length&&e.$element.css("text-align")=="right"},callback:function(t,n,r){e.$element.css("text-align","right")}},justify:{iconClass:"ueditor-justify",isActive:function(t){return e.$element.length&&e.$element.css("text-align")=="justify"},callback:function(t,n,r){e.$element.css("text-align","justify")}}}}}},r.stateLists={beforeInit:function(){var t=this;this.opts.stateButtons.stateLists={title:"List style",defaultState:"none",states:{none:{iconClass:"ueditor-nolist",isActive:function(t){var n=e(t.getParent());return n.length&&n.css("text-align")=="left"},callback:function(e,n,r){t.execLists("insertorderedlist","orderedlist")}},unordered:{iconClass:"ueditor-unorderedlist",isActive:function(t){var n=e(t.getParent());if(n.length){var r=n.closest("ul");if(r.length)return r.closest(".ueditable").length}return!1},callback:function(e,n,r){t.execLists("insertunorderedlist","unorderedlist")}},ordered:{iconClass:"ueditor-orderedlist",isActive:function(t){var n=e(t.getParent());if(n.length){var r=n.closest("ol");if(r.length)return r.closest(".ueditable").length}return!1},callback:function(e,n,r){t.execLists("insertorderedlist","orderedlist")}}}}}},r.panelButtons={beforeInit:function(){var e=this},init:function(){var t=this;e.each(this.opts.buttonsCustom,function(n,r){if(r.panel){var i=e('<div class="redactor_dropdown ueditor_panel redactor_dropdown_box_'+n+'" style="display: none;">'),s=t.buttonGet(n);r.panel=new r.panel({redactor:t,button:s,panel:i}),i.html(r.panel.$el),i.appendTo(t.$toolbar),r.dropdown=!0,s.on("click",function(){s.hasClass("dropact")?(t.selectionRemoveMarkers(),r.panel.trigger("open",t)):r.panel.trigger("closed",t)}),t.$editor.on("mouseup.redactor keyup.redactor",function(){s.hasClass("dropact")&&(t.dropdownHideAll(),r.panel.trigger("closed",t))}),i.on("click keydown keyup",function(e){e.stopPropagation()});if(e.inArray(n,t.opts.airButtons)===-1)return;t.buttonAdd(n,r.title,function(){var s=t.buttonGet(n),o=s.position().left;e(".re-icon").removeClass("redactor_act dropact"),s.addClass("redactor_act dropact"),e(".redactor_dropdown").not(i).hide(),i.css("left",o+"px").toggle(),i.is(":visible")&&typeof r.panel.open=="function"?r.panel.open.apply(r.panel,[jQuery.Event("open"),t]):typeof r.panel.close=="function"&&r.panel.close.apply(jQuery.Event("close"),[e.Event,t]);var u=e(".redactor_dropdown.ueditor_panel").last(),a=o-u.innerWidth()+s.width();u.css("left",a+"px")},!1)}})}},r.upfrontLink={openPanel:function(){var t=this.buttonGet("link").position().left;e(".redactor_dropdown_box_upfrontLink").css("left",t+"px").toggle()},beforeInit:function(){this.opts.buttonsCustom.upfrontLink={title:"Link",panel:this.panel}},panel:n.extend({tpl:_.template(e(t).find("#link-tpl").html()),events:{open:"open"},initialize:function(){this.linkPanel=new Upfront.Views.Editor.LinkPanel({button:!0}),this.bindEvents(),n.prototype.initialize.apply(this,arguments)},render:function(e){e=e||{},this.linkPanel.model.set({url:e.url,type:e.link||this.guessLinkType(e.url)}),this.linkPanel.render(),this.$el.html(this.linkPanel.el),this.linkPanel.delegateEvents()},open:function(t,n){this.redactor=n;var r=!1;n.$element.hasClass("upfront_cta")?r=n.$element:r=n.currentOrParentIs("A"),r?this.render({url:e(r).attr("href"),link:this.guessLinkType(e(r).attr("href"))}):this.render()},close:function(e,t){this.redactor.selectionRemoveMarkers()},unlink:function(t){t&&t.preventDefault();if(this.redactor.$element.hasClass("upfront_cta"))this.redactor.$element.attr("href","#");else{var n=this.redactor.getSelectionHtml();e.parseHTML(n).length>1?this.redactor.execCommand("inserthtml",n,!0):this.redactor.execCommand("unlink")}},link:function(t,n){if(t)if(this.redactor.$element.hasClass("upfront_cta"))this.redactor.$element.attr("href",t);else{this.redactor.selectionRestore(!0,!1);var r=this.redactor.getSelectionHtml(),i=this.redactor.currentOrParentIs("A");i?e(i).attr("href",t).attr("rel",n):this.redactor.execCommand("inserthtml",'<a href="'+t+'" rel="'+n+'">'+r+"</a>",!0)}},bindEvents:function(){this.listenTo(this.linkPanel,"link:ok",function(e){e.type=="unlink"?this.unlink():this.link(e.url,e.type),this.closeToolbar()}),this.listenTo(this.linkPanel,"link:postselector",this.disableEditorStop),this.listenTo(this.linkPanel,"link:postselected",function(e){this.enableEditorStop(),this.link(e.url,e.type)})},guessLinkType:function(t){return e.trim(t)?t.length&&t[0]=="#"?t.indexOf("#ltb-")>-1?"lightbox":"anchor":t.substring(0,location.origin.length)==location.origin?"entry":"external":"unlink"}})},r.upfrontColor={beforeInit:function(){this.opts.buttonsCustom.upfrontColor={title:"Color",panel:this.panel}},panel:n.extend({current_color:!1,current_bg:!1,events:{open:"open"},close:function(e,t){t.cleanRemoveEmptyTags(t.getCurrent())},setCurrentColors:function(){var t=this.redactor.getCurrent();if(t&&e(t).prop("tagName")=="INLINE"||e(t).hasClass(".upfront_theme_colors")){var n=tinycolor(e(t).css("background-color"));this.current_color=e(t).css("color"),n.getAlpha()>0&&(this.current_bg=e(t).css("background-color"))}else this.current_color=this.current_bg=!1},open:function(e,t){this.updateIcon(),this.setCurrentColors();var n=this,r=new Upfront.Views.Editor.Field.Color({spectrum:{flat:!0,showAlpha:!0,appendTo:"parent",showPalette:!0,localStorageKey:"spectrum.recent_colors",maxSelectionSize:10,preferredFormat:"hex",chooseText:"Ok",showInput:!0,allowEmpty:!0,change:function(e){n.current_color=e},move:function(e){t.selectionRestore(!0,!1),n.current_color=e}}}),i=new Upfront.Views.Editor.Field.Color({blank_alpha:0,spectrum:{flat:!0,showAlpha:!0,appendTo:"parent",showPalette:!0,localStorageKey:"spectrum.recent_bgs",maxSelectionSize:10,preferredFormat:"hex",chooseText:"Ok",showInput:!0,allowEmpty:!0,change:function(e){n.current_bg=e},move:function(e){t.selectionRestore(!0,!1),n.current_bg=e}}});r.render(),this.$("#tabforeground-content").html(r.el),i.render(),this.$("#tabbackground-content").html(i.el);if(this.current_color){var s=tinycolor(n.current_color);r.$(".upfront-field-color").spectrum("option","color",n.current_color),r.$(".upfront-field-color").spectrum("set",s),r.$(".sp-input").css({"border-left-color":n.current_color}),r.render_sidebar_rgba(s.toRgb()),r.update_input_val(s.toHexString())}else{var s=tinycolor("#000000");r.$(".upfront-field-color").spectrum("option","color","#000000"),r.$(".upfront-field-color").spectrum("set",s),i.$(".sp-input").css({"border-left-color":"#000000"}),r.render_sidebar_rgba(s.toRgb()),r.update_input_val(s.toHexString())}if(this.current_bg){var s=tinycolor(n.current_bg);i.$(".upfront-field-color").spectrum("option","color",n.current_bg),i.$(".upfront-field-color").spectrum("set",s),i.$(".sp-input").css({"border-left-color":n.current_bg}),i.render_sidebar_rgba(s.toRgb()),i.update_input_val(s.toHexString())}else{var s=tinycolor("rgba(0, 0, 0, 0)");i.$(".upfront-field-color").spectrum("option","color","rgba(0, 0, 0, 0)"),i.$(".upfront-field-color").spectrum("set",s),i.$(".sp-input").css({"border-left-color":"rgba(0, 0, 0, 0)"}),i.render_sidebar_rgba(s.toRgb()),i.update_input_val(s.toHexString())}this.$(".sp-choose").on("click",function(){n.updateColors(),n.closePanel(),n.closeToolbar(),n.redactor.dropdownHideAll()})},render:function(){var t=e('<li id="tabforeground" class="active">').html("Text Color"),n=e('<li id="tabbackground">').html("Text Background"),r=e('<ul class="tablist">').append(t).append(n),i=e('<ul class="tabs">').append(e('<li id="tabforeground-content" class="active">').html('<input class="foreground" type="text">')).append(e('<li id="tabbackground-content">').html('<input class="background" type="text">')),s=this.redactor,o=this;s.bufferAirBindHide=this.redactor.airBindHide,s.airBindHide=function(){o.updateIcon(),s.bufferAirBindHide()},r.children("li").on("click",function(){r.children("li").removeClass("active"),e(this).addClass("active"),i.children("li").removeClass("active"),i.children("li#"+e(this).attr("id")+"-content").addClass("active"),o.$("input.foreground").spectrum("option","color",typeof o.current_color=="object"?o.current_color.toRgbString():o.current_color),o.$("input.background").spectrum("option","color",typeof o.current_bg=="object"?o.current_bg.toRgbString():o.current_bg)}),this.$el.html(r).append(i)},updateIcon:function(){var e=this;e.setCurrentColors();if(e.current_bg){var t=tinycolor(e.current_bg);t.getAlpha()===0?this.redactor.$toolbar.find(".re-icon.re-upfrontColor").addClass("transparent").css("border-color",""):this.redactor.$toolbar.find(".re-icon.re-upfrontColor").removeClass("transparent").css("border-color",t.toRgbString())}else this.redactor.$toolbar.find(".re-icon.re-upfrontColor").addClass("transparent").css("border-color","");e.current_color?this.redactor.$toolbar.find(".re-icon.re-upfrontColor").css("color",e.current_color):this.redactor.$toolbar.find(".re-icon.re-upfrontColor").css("color","")},updateColors:function(){var t=this,n=this.redactor.getParent(),r="";bg_class="",html="",t.current_bg&&typeof t.current_bg=="object"&&(this.redactor.inlineRemoveStyle("background-color"),r="background-color:"+t.current_bg.toRgbString(),bg_class=Upfront.Views.Theme_Colors.colors.get_css_class(t.current_bg.toHexString(),!0),bg_class?(r="",bg_class+=" upfront_theme_colors"):bg_class="inline_color");if(t.current_color&&typeof t.current_color=="object"){var i=Upfront.Views.Theme_Colors.colors.get_css_class(t.current_color.toHexString());if(i){var s=this.redactor.getCurrent();e(s).hasClass(i)||(this.redactor.selectionRestore(!0,!0),this.redactor.bufferSet(),this.redactor.$editor.focus(),this.redactor.inlineRemoveStyle("color"),this.redactor.inlineRemoveClass("upfront_theme_colors"),this.redactor.inlineRemoveClass("inline_color"),html=this.redactor.cleanHtml(this.redactor.cleanRemoveEmptyTags(this.redactor.getSelectionHtml())),html="<inline class='upfront_theme_colors "+i+" "+bg_class+"' style='"+r+"'>"+html+"</inline>")}else _.each(Upfront.Views.Theme_Colors.colors.get_all_classes(),function(e){t.redactor.inlineRemoveClass(e)}),this.redactor.selectionRestore(!0,!0),this.redactor.bufferSet(),this.redactor.$editor.focus(),this.redactor.inlineRemoveStyle("color"),this.redactor.inlineRemoveClass("upfront_theme_colors"),this.redactor.inlineRemoveClass("inline_color"),html=this.redactor.cleanHtml(this.redactor.cleanRemoveEmptyTags(this.redactor.getSelectionHtml())),html="<inline class='inline_color' style='color: "+t.current_color.toRgbString()+";"+r+"'>"+html+"</inline>"}html===""&&(html=this.redactor.cleanHtml(this.redactor.cleanRemoveEmptyTags(this.redactor.getSelectionHtml())),html="<inline class='"+bg_class+"' style='"+r+"'>"+html+"</inline>"),this.redactor.execCommand("inserthtml",html,!0),e.trim(e(n).text()).localeCompare(e.trim(e(html).text()))===0&&(e(n).hasClass("inline_color")||e(n).hasClass("upfront_theme_colors")),t.updateIcon(),t.redactor.selectionRemoveMarkers(),t.redactor.syncClean()}})},r.upfrontFormatting={init:function(){var t=this,n={},r={p:"P",h1:"H1",h2:"H2",h3:"H3",h4:"H4",h5:"H5",h6:"H6",pre:"&lt;/&gt;",blockquote:'"'};e.each(r,function(e,r){n[e]={title:r,callback:t.applyTag}}),e.inArray("upfrontFormatting",this.opts.airButtons)!==-1&&this.buttonAddFirst("upfrontFormatting","Formatting",!1,n),UeditorEvents.on("ueditor:dropdownShow",function(){var n=e(t.getElement()).length?e(t.getElement())[0].tagName:!1;n&&(n=n.toLowerCase(),e(".redactor_dropdown_box_upfrontFormatting a").removeClass("active"),e(".redactor_dropdown_"+n).addClass("active"))})},applyTag:function(t){this.selectionRestore(!0,!0),this.bufferSet(),this.$editor.focus();var n=e(this.getCurrent()).css("text-align");this.formatBlocks(t),typeof n!="undefined"&&this.blockSetStyle("text-align",n),this.dropdownHideAll()}},r.blockquote={beforeInit:function(){var t=this;this.opts.stateButtons.blockquote={title:"Set a quote",defaultState:"noquote",states:{noquote:{iconClass:"ueditor-noquote",isActive:function(e){var n=t.getQuote();return!n},callback:function(e,n,r){t.formatQuote("blockquote")}},quote:{iconClass:"ueditor-quote",isActive:function(n){var r=t.getQuote();return r&&!e(r).hasClass("upfront-quote-alternative")},callback:function(e,n,r){t.formatQuote("blockquote")}},alternative:{iconClass:"ueditor-quote-alternative",isActive:function(n){var r=t.getQuote();return r&&e(r).hasClass("upfront-quote-alternative")},callback:function(e,n,r){t.getQuote().addClass("upfront-quote-alternative")}}}}},getQuote:function(){var t=e(this.getParent());return t.prop("tagName")=="BLOCKQUOTE"?t:(t=t.closest("blockquote"),t.closest(".redactor_box").length?t:!1)}},window.RedactorPlugins=r})})(jQuery);