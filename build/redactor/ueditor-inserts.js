(function(e){define(["text!scripts/redactor/ueditor-templates.html"],function(t){var n={IMAGE:"image"},r=Backbone.View.extend({initialize:function(e){e=e||{};var t=e.data||{};this.data=new Backbone.Model(t),this.listenTo(this.data,"change add remove reset",this.render)},start:function(){var t=e.Deferred();return t.resolve(),t.promise()},getShortcode:function(){var e=this.data.toJSON(),t='[upfront-insert type="'+this.type+'"';return _.each(e,function(e,n){t+=" "+n+'="'+e+'"'}),t+"]"}}),i=r.extend({type:"image",tagName:"p",className:"upfront-inserted_image-wrapper",tpl:_.template('<img src="{{src}}" width="{{width}}" />'),start:function(){var e=this,t=Upfront.Media.Manager.open();return t.done(function(t,n){var r=e.getImageData(n);e.data.clear({silent:!0}),e.data.set(r)}),t},render:function(){this.$el.html(this.tpl(this.data.toJSON()))},getImageData:function(e){var t=e.at(0).toJSON(),n={id:t.ID,title:t.post_tite,src:t.image.src,height:t.image.height,width:t.image.width};return n}}),s={};return s[n.IMAGE]=i,{UeditorInsert:r,inserts:s,TYPES:n}})})(jQuery);